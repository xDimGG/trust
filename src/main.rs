#![allow(clippy::upper_case_acronyms)]

mod binary;
mod network;
mod world;

use binary::reader::Reader;
use network::server::Server;
use std::{num::ParseIntError, path::Path};
use world::{binary::SafeReader, types::{Liquid, World, WALL_COUNT}};

impl Drop for SafeReader {
	fn drop(&mut self) {
		if self.cur < self.buf.len() {
			println!("dropped SafeReader before EOI ({} bytes remaining)", self.buf.len()-self.cur)
		}
	}
}

impl Drop for Reader<'_> {
	fn drop(&mut self) {
		if self.cur < self.buf.len() {
			println!("dropped Reader before EOI (code: {}, {} bytes remaining)", self.buf[0], self.buf.len()-self.cur)
		}
	}
}

// use directories::UserDirs;

fn decode_hex(s: &str) -> Result<Vec<u8>, ParseIntError> {
	(0..s.len())
		.step_by(2)
		.map(|i| u8::from_str_radix(&s[i..i + 2], 16))
		.collect()
}

#[tokio::main]
async fn main() {
	// let world = World::from_file(Path::new("/Users/angelolloti/Library/Application Support/Terraria/Worlds/Courtyard_of_Grasshoppers.wld")).unwrap();
	let world = World::from_file(Path::new("/mnt/c/Users/Dim/Documents/My Games/Terraria/Worlds/college_is_easy.wld")).unwrap();
	let srv = Server::new(world, "");
	srv.listen("127.0.0.1:7778").await.unwrap();

	return;

	let f = decode_hex("480d0000c2010000c800960046000211060102460002040602024600020946003b0146000207460102054600020c0602024600020c460102084600021746003b014600020246003b014600020706003f06023f443f01267e013f443f02667e013f01443f010441443f06267e013f043f267e013f0750013f46013f020600414600020746010206460002014601020546000203460102084600021a460102044600020d06003b460002064601020646000217060202460002024601020246280202460102034600021206003b4600020146003b024600020146003b014600020706003f06023f443f01267e0141443f02667e013f01443f040441443f090750023f46023f014600020646010205460002014601020546000204460102064600020806020246000211460102044600020d06003b46000204060202460002014601020646000209060202460002104601020146280204460102024600021146003b0706000246003b024600020606003f06023f0603d80000003f443f04267e0141267e013f443f030441443f050441443f04267e013f46023f0106024146023f014602410106023f46013f0146010205460002014601020246000204460102074600020e0602024600020206020246000207460102044600020c06003b46000207460102064600020e0601024600020e462802064601020146000207462802014600020846003b0206000246003b014600020146003b014600020746023f010710023f06030e0100003f443f02667e013f01043f06b97e0000003f443f010441061c000048003f061c120048003f443f080441667e013f02043f0750023f06023f267e013f443f010750023f06023f06013f4601020506000246010201460002054601020746000201060202460002194601020746000212460102054600020d460102024600020b06003b4628020806010246000206462802024600020946003b014600020546003b014600020706003f46023f010720023f06b9360000003f0603d80000003f06b9900012003f06b9a20012003f0730013f46013f010710013f06b9480000003f061c00005a003f061c12005a003f06b9b40000003f0441443f060441443f01267e013f443f01667e013f01443f020750024146013f014601020446000207460102084600021d4601020846000211460102034600020d460102034600020a06283b4628020a0601024600020346280203460002020602024600020e46003b014600020706020206000206003f46023f0306014146013f0106014146013f0146023f020710023f06036c0000003f443f040441443f010441267e013f443f02267e013f443f010441443f0106014146013f0146010202460002040602024600020146070202460102014600021606a7024600020306020246000204460102010600024601020746000210460102014600020d460102044600020806003b0600024628020c46000202462802034600021446003b024600020d460102034600020206003f46023f010710023f06b9900000003f443f06267e013f443f09044146013f0206003f460002070601024607020146010201460002110602024600020246a702024600020746010207460002020601024600021e460102054600020b462802134600021446003b024600020c460102044600020406003f06024106023f0710013f06037e0000003f443f100441043f0750023f06023f06003f4600020546010204460002070602024600020c46a702034600020706010206013b4601020446000203060102460002020602024600020e0602024600020a460102034600020e46280212460002110602024600020106003b06023b4600020c460102044600020706004106013f06023f0710023f0603680100003f0441043f0441443f02444101443f070441043f0750023f06023f06003f46000203460102044600021746a702024600020606003b06013b46010204060002460102044600020e0601024600020d46010203460002070601024600020206010246000203462802104600021446003b014600020c46010204460002074601020246013f0106023f443f020441443f030441443f060441043f044106023f06003f4600020206010246000203060102460002160601024600020746003b024601020c4600020e462802014600020a460102034600020706013b460002094628020f06a7024600020546003b014600020a06003b4600020c46010205460002084601020146013f02267e0141443f050441443f090441043f06023f06003f4600020746010202460002140601024600020646003b034601020c46000203060102460002064601020146280204460002084601020346000207060102460002040601024600020206023b06000206280206283b4628020b46a702024600020606010206000206003b4600020146003b014600020146003b014600020c46010205460002074601020246013f010740013f043f267e013f443f100441043f06023f06003f4600020746010205460002110601024600020206020206000246003b044601020d4600020246010201460002054601020146280206460002074601020246000207460102010607024600020446013b0106003b06000206003b06000206003b06283b4628020a46a70202460002070601024600020506003b4600020a0602024600020146010205460002010601024600020606010206013f06014106013f443f01267e013f443f050441043f444101443f07044106023f06003f460002010602024600020646010204460002110601024600020246003b03460002014601020d4600020146010202460002010601024600020146010201462802074600020746010202460002064601020206070246000204460102014600020546283b02462802064600020106a70206000206020206000246010201460002040601024600020f060202460002014601020646000201460102024600020406023f06013f043f0441043f0441267e013f443f1106b9240000003f06023f06003f46000209460102054600020f4601020206013b46003b03460002024601020e0600024601020146000201460102014600020146010201462802084600020106010206003b46000202460102014600020346003b02060002060102460702034600020346010201460002020601020600020601024628020146283b01462802034c028601075001024600020346010201460002050601024600020e0c02ff460002014601020646000202460102044600020106003f06023f043f0441443f010441267e013f443f010441443f0e46023f014600020b4601020446000209060102460002034601020206013b46003b0206013b06010206000246010206460002014601020a06000246010202460002014628020a460102014600020106003b060002460102024600020246003b034600020106010246070202460002034601020106000246010202460002014601020106013b46003b020740003b4c02ff0307500002460002014601020146000206460102014600020c074000020c02ff060002460102050600020601020600024601020706003f46023f01443f04267e013f443f030441443f0b0730024106023f06003f4600020606010246000203460102044600020806010207400102460002014601020306003b06013b46003b0346010208460002034601020d06000246280209460102014600020246003b01460102014600020346003b024600020246010204460002024601020306000246010201460002014601020206013b0740003b0c3bff4c02ff0407500102460102010600020601024600020546010202460002030601024600020146010202460002010c02ff071000020600024601020f06013f06023f07400241443f05267e013f0441443f020441443f0606b9000012003f06b9120012003f043f0710013f06013f06023f0600414600020b460102064600020306010246000201460102010402460102044600020146003b024600020146010208460002044601020c060002462802070402060002460102014600020306003b460102014600020246003b02060102460002034601020a460002034601020306013b4c3bff034c02ff03060102460002010601024600020646010201460002024601020106000246010203074001024c02ff01460002014601020906000206010206013b4601020246013f01443f030441443f01267e013f443f0806b9480000003f043f0730013f46013f044600020406020246000206460102084600020506010244020246010202060002460102024600020346010208460002054601020c4628020507402802040207302802062802460102014600020446013b014600020246003b0106000206010246000203460102070600024601020146000203460102020c02ff4c3bff044c02ff03460102024600020306010246000203460102010600024601020346000201060202074001024c02ff01060102460002024601020946013b0206010246013f02443f050441267e013f443f050441043f0730014146013f0106014106013f46013b0246000208060102460002014601020a460002010601020600024601020244020206010206a7024600020246010201460002024601020946000201060102460002034601020c4628020307402802440201462802010601024600020506010206013b06000246003b0206013b460102020600024601020806000246010202460002040601024c02ff024c3bff034c02ff0346010201460002030601024600020446010207060202074002024c02ff010730010246010201460002044601020746013b0106013f060141443f050441443f010441443f050730013f46013f024601020346013b0246003b0146000204460102020600024601020a4600020146010201460002010601024402010730010246a70201460002014601020246000202460102050600020601024600020446010203460002084601020446280202040207302802462802024600020606010206013b06000246003b024601020d0600024601020246000201060102460002034c02ff014c3bff024c02ff0446010203060002460102014600020546010202040246010201460202014c02ff01073001024601020246000201060102060002460102020607024601020546013f01443f080441443f030441043f0730023f46013f01460102044600020146013b0146003b0146000203460102090600024601020b440201460102020600024601020246000204460102054600020646010202060002460102024600020146010201460002014601020446280206060702060102460002034601020106000246003b024600020146010207460002014601020146000207060102460002020601024c3bff024c02ff05460102064600020446010202440201460102010602020e3402ff4c02ff01460102044600020246010201460702014601020306013f46014101443f040441443f020441443f0204410603680100003f06037e0000003f0730013f06023f06013f460102054600020446003b014600020146010217440201460102010600024601020446000203460102044600020846010202060002460102054600020346010203462802040607020628020601024600020406010246003b024600020246010207460002034601020146000207460102034c3bff010e1c0000480002ff0e1c1200480002ff0e1c0000000002ff0e1c1200000002ff4c02ff014601020246000201460102020600020601024600020106010244020107300102460102010602024e3402ff014c02ff014601020146013f0246023f0306013f46073f0306014146013f010441043f0441443f010441443f010441443f050730013f46023f0206003f460102074600020306003b06013b4600020146010210460002014601020307400102440201060102040246010206460002034601020446000207460102010600024601020546000204460102044628020246070201062802060102460002034601020146003b0206000206010246013f034601020546000201060102460002060601024600020346010202072001020e1c00005a0002ff0e1c12005a0002ff0e1c0000120002ff0e1c1200120002ff071001024601020d0402073001024601020106000246020201071002020c02ff06020206010206013f0601410740013f043f267e013f267e0141267e013f443f04044146013f0107400141443f090441443f0346013f014601020a460002010601020600024601020106013b460102060600024601020f4402020601024402014601020446000204460102040607024600020706010206000246010207460002054601020246280204060102460002024601020206013b46003b0146013f02043f0750013f46013f024601020546000206060102040246000203460102054600020106010246000201460102110600024602020106010206003f06013f0740013f443f01267e013f267e0141267e013f443f160730023f46013f0106010246000201460102080740010204024601020206013b460102050600024601021044020206010244020307500102460102014600020546010202460702010601024600020106010246000203460102094600020446010205462802020601024600020506003b06013b46013f010740013f443f0446013f014601020446000202060102460002014601020104024600020346010203460002020601024600020246010201460002014601020246a702014601020c06013f060141443f02667e013f02443f030441443f040441443f0b06014106013f46010202460002014601020106000206010206000246010201074001024402014601020206013b46010215060002060102440202060102440205075000024600020446010201060002460702024601020b060002460102034600020446010206462802020601024600020506010206013b06013f06023f443f05044146013f03060102460002024601020106000206010246070202460002024601020106000246010201460002010601024600020346010201460002014601020246a70201060102060002460102084600020146013f01443f02667e013f02443f11444101443f0206013f06003f460102040600024601020146000202074000024402014601020844020207500102460102090600020601024600020106010206000244020206010244020846000205460702024601020a4600020146010203460002034601020806280246010201460002044601020106014106023f0441443f010441443f03444101043f46013f0146000205460702044600020646010201460002044601020106000246010204460002014601020a46013f010740013f443f02667e013f020441443f140730023f06023f06013f46010204460002020601020600020601024402010600024601020206013b460102044402030750010246010203460002014601020346000201460102014402030601024402090750000246000203060102060702460102084600020446010203460002034601020406000246010202460002064601020206003f06013f0441443f03444101043f0441443f010750013f06023f06003f46000204460702044600020546010202460002024601021646013f01443f03667e013f01443f030441443f0f06b9360000003f0730023f06023f06003f460102054600020306010244020107300002060002460102064402060750010246010203460002014601020407400002440204060102072001024402094601020c46000205460102044600020246010209460002054601020306003f06013f443f090441043f06013f06023f4600020106010206000206010246070205460002064601021a46013f01443f04267e013f443f010441443f0b444101443f0104410730023f06023f06024106003f060002460102064600020204020710010246010203460002034601020144020706010246000202460102010740010244020106010244020646010201072000024402090600024601020b460002034601020346000201460102040600020601024600020146010203460002044601020446013f01443f020441443f030441443f010441043f06023f06003f46000202460102024607020246010203460002044601021946013f010c41ff0730013f06013f443f01267e013f443f0b0441443f01061c24006c003f061c36006c003f043f06b97e0000003f0730013f06013f06003f460002034601020e4600020344020a075001024601020344020a4601020106000244020a075001020601020740010244020646010201460002034601020306000246010204060002460102014600020146010203460002044601020446013f010720013f0441443f03061c00006c003f061c12006c0041443f0406013f06014106010246000201460102024607020146010207060002460102130600024601020646013f02043f0441043f267e013f0441443f050441043f06b9fc0000003f0710013f443f0106b97e0000003f06b97e00000041061c24007e003f061c36007e003f0710013f46013f0246000203460102070402460102064600020344020b075001020601020740010244020b4601020146000201071001024402110730010246010202460002024601020206000246010201060002460102024600020546010202460002034601020506000246013f01443f04061c00007e003f061c12007e003f043f444101443f0146013f0146010223460002024601020546013f010441443f0706ba7a0100004106ba8c0100004106ba9e0100003f043f06b96c0000003f46013f044601410146013f02460102024600020206a8024601020846000202460102030600024601020144021a460002030601020710010244020f0730010246010204460002044601020146000201460102024600020546010202460002024601020506000206013f06023f0740013f443f0406023f06013f043f0441443f0206013f0601414601020a060002060102060002460102030600024601020f460002044601020106000206010246013f010740013f443f0806ba7a0112003f06ba8c0112003f06ba9e0112003f0710023f46013f014601020d46a802014600020146010204460002044601020707100102440218060102460002014601020244020e0600024601020546000203460102010600024601020346000206060102460002034601020646013f010740013f443f040730014106013f443f010441043f44410146013f024601020806000206010246000201460102040600024601020e460002044601020246013f01443f040441443f0106b9b40000003f0730014146013f0306023f06003f0600024601020f4600020146010202040246000203460102014600020146010206440218460102050720010244020c073000020600024601020546000202460102014600020146010203060002060102460002094601020306000206013f06014106013f043f444102443f0206013f443f050441043f0750013f46013f014601020706013f06023f06024106023f06000246010213460002054601020106023f06013f443f040441443f0146013f0246010203460002024601020806a802460102044600020106010246000201060102460002024601020146000203460102050720000206b97e000000024402164601020744020a460102010600024601020a4600020146010203460002094601020546013f01443f030441443f02044106023f443f0846013f01460102020600024601020146013f02667e013f0106023f46013f0106000246010212460002024601020246013f01267501000000003f443f060730013f46013f0146010207460002010601020600024601020346a80203060102060002060102460002010601024600020106010246000201460102024600020546010202460002024402164601020644020a073000024601020c4600020146010204460002084601020646013f01443f010441443f0406b9480000003f06a83f0720013f043f0441443f0646013f014601020206000206003f06023f0740013f043f267e0141267e013f043f267501000000003f06024106023f06013f4601021106020206000206010206013b46013f030441443f010441443f020730023f06023f06003f460102080600024601020546a8020446010206460002020740010244020206010246000205460102014600020106010207200102440215060002460102060710010244020846010206060002460102034600020246010205460002060601020600024601020506000206003f06023f443f010441443f0406a84106a83f06013f0720013f0441443f020441043f0441043f0750013f46013f014601020106014106013f0740023f443f01667e013f01443f020750024146013f014601020f0c02ff4602020106000246013f010740013f443f0806023f06003f0600024601020d0600024601020146a8020446010203040207500102060002440206460002044601020644020e061c0000000002061c12000000024402030710010246000201460102060720000206b9000000000244020406b9b4000000024601020b4600020446010204060002060102460002034601020806000246023f01443f0646013f0106014146013f02443f0746013f0106010206000206013f060141443f02267e0141267e013f0441443f0104410750013f06013f0601414601020d4c02ff010e3402ff06020206000206003f06013f443f0806013f06023f4600020546010209060002460102070740010244020306000244020746000204460102050720010206b9480000000244020c061c0000120002061c120012000206b91200000002071001024601020406000246010207440203073001024601020c460002054601020306000246010201460002010601020600024601020406000206010206000206003f06023f267e013f0441443f070750013f06013f0740013f443f0946013f0106023f06013f443f03667e013f01443f0506013f06023f06013f4601020a4c02ff020e3402ff06020206000206003f060241443f070730014146013f01060002060102460002024601020a0600020601020600020601024600020344020f0750000246000203460102060720010244020b4601020746000201460102070720010206b97e00000002071001024601021046000201460102064600020146010203060002460102034600020206004106023f267e013f043f0441443f040441443f010441443f0a0750013f06013f0740013f443f04267e014106b9480000003f443f030441043f04410750023f460141014601020a071001020c02ff0e3402ff06020206000246023f01443f020441443f020730013f46013f0106010206000246010201460002024601020906000246010202060002074000024402120750000246000202460102070710000244020b4601020406013b0601024600020246010222460002024601020346000201460102034600020106003f06023f0720023f443f0b0615000000003f0615120000003f443f0806013f443f050730353f06353f0720353f443f0606023f06003f4601020b06020206023f06013f46023f01267e013f443f050730013f46013f01460102044600020146010201060002460102064600020146010202440215460002024601020706000244020c4601020246013b0106010246000201460102084600020146010201060002460102060600024601020e06000246010204460002014601020306000246003f040710003f443f05061c480024003f061c5a0024003f443f010615000012003f0615120012003f443f0f46353f03443f0546003f01460002014601020546013f0246003f0206013f443f0846013f014601020446000201460102014600020106010206000246010203460002014601020107400102440216460002014601020906b9360000000244020b06a5480048000206010206013b46010202460002034601020406a70206010246000203460102180600024601020946003f010740003f443f0246003f010720013f043f0710013f06b9480012003f06b95a0012003f061c480036003f061c5a0036003f0730013f46013f020720013f443f0e06353f06013f46353f01443f0546003f014600020146013f0606a5360048003f267501000000003f46003f010740003f06a5480048003f443f05061c24006c003f061c36006c003f0730013f46013f014601020446000201060102460002014601020146000205460102024402154001020106000202014601020944020d06013b4601020146000205040206a53600480002040246a702020601024600020146010206460002024601021a06003f06a73f443f020730003f46003f0146013f0506003f46013f0106010246013f020710013f443f0c46013f0306353f443f0306b9240000003f46003f0246013f01443f11061c24007e003f061c36007e003f46013f01460102054600020c460102010740010244021440010330014201030601024600020106010206a70246010203072001024402014001440201400204024001040206013b460102014600020406010244020246a70202060102060002460102064c02ff0146000204460102024600020146a802014601020346280201060002460102010628024601020546013f01443f0306a73f06013f4601020c46013f010710013f443f08061c240024003f061c360024003f0730013f46013f010740013f043f06353f443f020730353f06353f06013f06003f06013f06a5480048003f443f1246013f0246010206460002030601024600020746010201440214400103300042010542000146a702014601020302010720010202b912000000400a020146010201460002020601020201060102004402010750a70246a702014600020246010205460002074601020246a8020306010206280206a5360000000244020306a53600480002040206a55a0000000206a536000000024601020246013f01443f0406a73f06013f460102030600024601020106a7024601020546013f0106b9240000003f043f06a5480024003f443f05061c240036003f061c360036003f46013f02443f0106353f443f010730353f46353f01443f150730013f46013f01060002460102064600020246010202460002060601020740010244021300031000020042010642000102a706a7020201460102014201030310014009420101460102014600020142010300440201460102010600024601020702004600020302000600024601020406a80244020204c406a53600120002040244c40406a55a0012000206a536001200020402443f070730013f46013f01460102014600020246a7020346010204020146013f010720013f06a5480036003f443f0546013f04443f0106353f043f0730353f46353f020720353f443f1446013f014600020102004601020402014600020246010203460002040601020600024402040710000244020c400142000142010402004201024200034201060320014008420102060102020102004201024002040202a536000000060102460002024601020442000206000242000202014601020544020144c4090402443f0846013f01460102010600024601020246a7020346010201020106010242010246013f0202a536005a004002043f400142010246013f01043f46353f0306350246353f010720353f443f1006a536005a003f0730013f46013f010601020600024200010201060002460102014201014200010600024601020446000203460102014402020710000246010201460002010720000240014402020004020004024003020042010402004201054200024201054008420107400402a5360012000201060102060002460102020201060102020102004201010200020102004201034601020106a548000000c444c40d443f0946013f010600024601020446a70202060102420104420001420102031001400402a53600000002010235020146353f034235014635020106353f268d013f06353f443f074001443f0546013f020601020600020201020042010206000242010502000201460102024600020504020730000246000201020106010202010601020201032000400702a536005a00031001420002420104020042010742000142010142000140094201080310010003300142010200020106000206010242010542000442010304c406a548001200c444c40e043f04c4443f0200443f0103300106013f020146010202420101460102034201040200420101020042010303100102b9b40000000002a53600240002a53600120000420101423506228d01423502443f064003443f034001040242010742000142010746010202074000020c02ff4600020442000242010402b99000120002b9a2001200400202b99000120002b9a200120003100142010242000142010442000142010a02000201400942011042000142010442000442010244c413443f0104c4400306013f42010806010242010342000142010903100102a5360036004002420101423504228d0142350300443f044006043f40040350014201104601020148ff010c02ff07500102060002420003420106420001420101020042010302004201010200420101420003420104420003420103400842010f020042010742000342010344c41602010320010042010d42000242010c0320350003303542350623408d01423503000130268d013f401042011103400148ff030201420002420106420003420105020002014200014201014200024201034200054201034009420101020002010200420109020042010f44c41606a548004800c404c442000142010e0200420105023542010242350102010235628d01024235050042350301100140401342010402004201070340010aa55a000000ff48ff040aa536000000ff0201420003420105420002420102020002010200020142000142010202000201020042010342000342010202a702000201400942011042000142010c44c4122647021600c600c444c40442000242010502a80201020042010f42350142010123408d014001023542010142350200423502228d01021c48006c00021c5a006c004014020042010142000242010608ff0aa55a001200ff48ff040aa536001200ff0201420005420101420003420105420001420109420001020742000142010242a7010340a7400a02a54800000003500042010242000142010942000142010c022844c41126470242005800c42647024200c600c444c40342000242350142010342a80142011042350102010340014001033035420102628d01010235228d0142350200021c48007e00021c5a007e00401542000342010703200148ff064201044200014201014200014201064200030201020042010742070142000142010142a702400b02a54800120000420103420001420109020042010c022844c41126470216004200c444c40442000142350142010442a801020042010f423501020140010330354201020340014001228d01004235020330354235010320354014020142000142010948ff0642010402004201064200014201034200044201020200420101420704420001020142a702400d42010f020042010c022844c4102647022c00c600c42647026e005800c42647024200f200c444c402420105420001420104020042010d42350102014002020102354201014004423501420101423503032035400102a55a005a00400f42010b02000320000a1c24000000ff0a1c36000000ff48ff030201020042010942000342010402000201020042010242000142070542000142010142a701400d42011d022844c41126470216004200c444c403420106420002420101021c48004800021c5a00480042010702354201040235020103400140010330014235034003628d01010235420103423501420103032001400f020102424201020200420104020002010a1c24001200ff0a1c36001200ff48ff0302014235010200420106420005420109020042010442000242010302a7400d02a54800000042010a4200010201420002420106020042010342280104c406a548002400c404c406ba00000000c406ba12000000c406ba24000000c444c40206d700002400c406d712002400c406d724002400c406a548002400c4664c01c40144c40126470216004200c444c40302004201074200010201021c48005a00021c5a005a00420108023542010242350102014002423504228d01400323508d014235014201020235420106032001400f0201020042010a03200108ff031001020142350102000235020042010202000201420002420101420001420104020042010202004201060200420105400d02a54800120042010b4200054201020200420107020004c406a548003600c404c406ba00001200c406ba12001200c406ba24001200c444c40206d700003600c406d712003600c406d724003600c406a548003600c4664c01c40144c40126470200001600c444c40106a55a005a00c40200420109020042010a423501420101423501420101400103303542350440054235034201050235420102032000400f4201070200420105423503020102004201020200420104424001420104020042010302004201080200420103400e42010e420003420101020000420106020042010342000342012242350602014001033035628d01020235628d010103203540044201014235024201040235420101420002401203500142010102004201044235044201064200010201020002014240014201084200020201420002420103420004400e0201020042010e42000400035001420105020042010242000342010f0200020702004201120235020002354201014001033035023523408d014001228d0140010235032035400342010142350242010642000102014200014012035000020042010442070142350242010742000242010142400142000102010200420104420004420104420005400e42000142010e4200034002420102020042010142000742010d020002014207014201080235020042010d0002a536005a0042010100033035228d0100033035423501420101400202010235020102354201070200420101020042010103200140110350014201044207014201090235420002420102024002014200024201050340010003500042000202a70201420006032000400d4201040002a5480048004001035001420106420003400242010342000a42010b42000242070242010842000142010b40014201030235000330354235024201014002420108023f42010302004201030320004011420103420703420109020042010742000202014006035000020042a7014200070201400d42070102014007020100035001420102004200030003300142010442000b42010a4200010201420702020042011202000201400142010a4002033035420107023f42010a032000401003500142010242070342010d420008400742000b032001400c02070002a548004800400a035001020142000302010042010542000c42010302000201420001420102420001420101420701020042010642350402010235420104020002010042010b00033035420108423f01020042010b401002010235020142070442010a4200094009420001020142000602010200401b42010142000142010102a55a005a00000200020142000342010142000742010342000202010200420103020042010608ff0235420103423506420106032035004201170235020042010702004201010200400f23508d0102000235020142070442010442350142010202004004420101400c4201014200010201420001420101420001401d0350014201034200064201024200054201034200020201020042010b08ff033035420104423501020142350242010542000142350142010c42000142010702354201030200420103020042010302000310000002b9b4000000400c420002420704020142000242010102354201020200400402a548000000400d02a55a0000004201030241420101420002032000401d4201044200044201070200020102004201024200010201020042011402350201423501420108628d01024201110235420102023542010602a54800000002a53600480000420103420003031001400b03500042010242070202014200044235014201020200400402a548001200400d02a55a00120042010103400100424101420004400a020040114201034200054201084200014201020200420101020042010b0200023542010642350442010248ff010aa536000000ff08ff03103540024201100235420109400102a5480012004002420102420003420101031001400a020042010542000442010242000203200040134201014001024142000302010200400402a536002400400203100002010200401003300142010342000742010642000142010242000142010242000542010142000242010942350342010148ff020aa536001200ff08ff42010103203502a55a005a00420106024302010243420104423501420109034001400542010242000342010202350320354008420001420105023542000242010142000302014013020102a54800000040010241420002420101020002b9d4010000400302a53600360003300142000242010140030330000200400a42010442000342010242000142010242000342010342001142350242010442350408ff0310354310010108ff03300102010235420109424303420102423502420105400102a55a00000040060350014201024200034201010235628d01014007420107423501020142350142000302010340004013020102a54800120040014201010200020142000303100102b9240000000310014201034200020201400102a55a005a0003300142000203100140034102020302a536005a000102030289000000004201044200024201024200014201010200023b420001420104420006020142000942350142000142010342350142010142350242010442350242010502004243050201423502420106400102a55a0012004007420108228d0123408d0140084201094235014200030201401502a5480048004002420101420004420104034001400242000202a548005a0003300102014200034201010310000003028700003600010200031000420101420001420104020042010342000342010842000602014200010201420004423b01420101023502004201074235034201030235228d010235420104020042010142430342350242010702a55a000000400b02284201010200420103400b0201023502010200420103423501420003023523408d014006021c24004800021c3600480040104201014200034201054004035001420102420004420101020002014200034201014200010201020002010200420105020002010200420109420006020102004201024200030201023b42010102350201420001020102004201044235020201423501420101004235014201084243010235420103423501420101400102a55a001200400c0350280228020042010202000320004009628d010242000242010202350200423501420001228d014007021c24005a00021c36005a0040060310354008020142000642010240060200420101420003420105420002420101420006420104020042010902424201014200064201034200034201040235020142000342010342350142010542350242010c02350201423504628d0101400f0228420103023540010130228d01400842000242010242000202354200010340004007628d01014004023302a80201032035400742010142000142010142000142010102a5480048004006020042010142000242010342000e420106022842010b420004420104420003420101023b420101020042010142000342010942350242010402354201030235420103423501628d010323408d014014420001020102350140400a42000102354201010235420004400d42330202a84201014007420104420001034000400902000201420002420103420016022842010b4200034201054200030201423b01423501020042010242000542010542350342010100420106423505228d0123408d01401842000202010aa55a005a00ff031035400902004235014201014235024200010340004007628d010242a901423302420103228d0140064207030200034000400b02000201420002420103420016022802004201094200034201030200420102420002423b03420106420003023542010442a80142350202010200020142350a228d0123408d01401942010202000201023503203540084201024235050200400a23508d0142a9014233014201010200023302354006420703034007400d020102a548004800020142000142010542000442010142000302014200080228020042010402004201034200044201040200420103423b03020042010542000442010242a803423503020042350b401c420102020042350140084201064235010340014007020102350320350042a901023302a94201010233628d01010233401802010002a548004800400202a548000000420102420007020142000202014200084228014201034200060201420002420104420001420102423b030200420101423501420102420004020142a804423509420101423504032035401b0200420101023502000235628d010140062275010000000003500142010640070330350235628d010102a942330302a942330123508d0123408d010233400a0269a40400000269b6040000400b0201400402a54800120000420001020142000d02014207014200014201014228014201054200034201014200014201044200040201423b030200020142000142010442000342a804423505020002350201423501420102423503628d0101401a020002a5360048000350014201010235400a42010523408d01400742000123408d0140034233064007021c24000000021c36000000021c48004800021c5a0048000269a40412000269b60412004001021c00000000021c1200000040060330010201400742010242000d420702020002010200422801420105420002420108420007423b03420002420105420002020142a802420102423502420001420107423502401f2275010000000002010200423501228d01400703500142010302a55a004800400742000200228d0140034233044008021c24001200021c36001200021c48005a00021c5a005a000269a40424000269b60424004001021c00001200021c12001200400642010140070350014201014233014200034201034200014207054201014228024201050200420109420006423b044200014201064200034201064235014200014235014201054235024020420101020002354009035001420101023540094200010320000003103540024233044006033000423501420704420002020148ff040aa536002400ff08ff420101020040084233020200020102004201034200034207034201024228034201054200014201020200420102420008423b04020042010600420002020102004201060200423502420104423503032035401f02a53600000000020102350200480c0923508d01228d01420101400942000142350103203540034233014004021c00002400021c12002400004200010235420703023b020142000248ff020aa536002400ff08ff0aa536003600ff03300142010142000140080233420101020042010442000502070200420102422804420104420001420101420002020142000402014200014201010200423b0342000142010442000402010200420105020042a7014201050235423b01423502032035401143103501400a02a5360012000042010203203548ff0923508d0102350201023b0002a536002400400723508d01228d010235228d0101204009021c00003600021c1200360000420003420701423b0102000201020048ff030aa536003600ff0330000201422801034001420102400803500142010742000542010342280442010542000302010002a5360048000201020042010102000201420001420101420001423b020200420103628d010102354002420001420105020042a7020200420105423b02628d010102014010033035423502032035483b0b42350303203548ff0802010235423b0102a5360036004009228d0100015001104008020742350142000402010235023b42000108ff0aa536002400ff48ff010310010201020042280200420101400b020042010642000542010242280542010442000203400002a548004800400102a548004800420103420006423b02020042010340010235628d01010002004201024235014200020201420003420102423501423b0223408d01401103303542350503203548ff07628d0101423504628d01012a25027e000000ff48ff012a250200000000ff0310352a250200000000ff08ff0201423b020201031001400b0150228d014006033007020742350100420004423b0142010108ff0aa536003600ff0330000200020102004228030022750100000000400d0200004201044200044201034228054201064006035001420101420006423b0242010400228d01023523408d014002035001420101023502014200070201423503423b0102010003100102010235032035400402a53600240040024310070103103b08ff03303542350803203548ff0623508d010235228d0142350248ff012a25025a000000ff48ff01228d010235228d012a250290000000ff0201423b0102354201024002628d0101400e423503628d0101420003423b0103400148ff010201420001020142280440110201020042010242000342010142000242280642010340090350010201420001420102420001423b024201034002228d0140044235024200080201423504420106400402a536003600033001420703423b0142350a0320352a250200000000ff03103548ff04020008ff423501628d010108ff2a25025a000000ff48ff02228d0108ff2a250212000000ff08ff423502420102032001400343103501400b628d010423408d01400103500042000248ff01031001020142000242280403402840120350000200420102420001420101420003422806420103400a420004420101423b034201014009228d0142350242000602354201024235044201054004420102420701423b0242350d03203548ff0402a742350148ff02228d012a2502d8000000ff48ff03228d010235228d0102354201044003423501400d23508d0123408d01400442000402014200024228040340284008021c48006c00021c5a006c0040094200014201014200010201420004422806020102000201400c42000102010200420101423b02420102400902a55a00240042350202014200010201423503020102a74235054201040340014004420105023b42350b628d010142350148ff0342a701020042350103203548ff012a25025a000000ff48ff022a25027e000000ff08ff228d010002354201040320014001628d01030320354014420006422801034028227501000000004003486a060a1c48007e006a0a1c5a007e006a486a0a020042010202000201020042a80202004228064201010200400c035000020042010102000201423b02420102032001400802a55a003600420101423501420102020042350242a702423503420104034001400502a548000000020142000342350302014235076275010000000001423501228d0148ff01020042a701420001423501628d01012a25025a000000ff48ff012a2502b4000000ff2a250224000000ff48ff0202004201024235024005228d014015420004422802400548ff040aa548002400ff0330010201020003100048ff0942000142010242a8040200422806420102400d0200420103423b034201024008420107420001023542a703423501420002420101034001400702a54800120042010242000142351048ff0142010142a70142000142010148ff012a25026c000000ff48ff012a25025a000000ff2a25027e000000ff48ff0202004201024235014201014003228d0123408d01401522750100000000420003422802400548ff040aa548003600ff420103023b03103b48ff07420002020142a807422806420101400c031000420002420101423b034201024008420108020042a70402354200040201400a4201014200024235030201423506228d010235628d010208ff0201228d01023548ff06228d0148ff0142350148ff0242010302350201420002401c420002422801034028400548ff03031001420105423b0103200048ff010a1c00002400ff0a1c12002400ff0aa548002400ff033000420002020142a807422807420101031001400a420003420102423b0342a7014003021c24006c00021c36006c004001033035420108020042010342000640020330000201400602a55a000000035001420003423501420103628d01010235628d010100023548ff030aa55a000000ff08ff42350203203548ff012a250290000000ff48ff010950ff228d010235628d01012a25027e000000ff08ff420102023542010142000303200100033035628d0101400c03300102010235228d01400522750100000000400122750100000000400748ff010310014201010200420103423b024200010310000a1c00003600ff0a1c12003600ff0aa548003600ff42000202010200020142a80542280942010103100140074200010201420002420103423b0142a702000310a703103500021c24007e00021c36007e0003100002354200024201054200014201034200064001033000420001400602a55a0012000003500042000142010302354201010023508d01228d010023508d01628d010103203548ff020aa55a001200ff08ff4235030320352a25027e000000ff2a25025a000000ff48ff03228d0148ff012a250212000000ff08ff42010242350102014200020235020142350148f30e420102227501000000000310354010031001420101420003420102423b0242000342010142000642a80342280a42010248240603300042000242010542000142a7054200084201050200020102004201034200044001420003400942000142010242350202010320010023508d01228d01400122750100000000228d0103203508ff0330354235066a25027e000000ff0148ff06023542010542000342350142010208ff03103548ff0b420104032001400f420102420003420102423b02420004420101420003020142000242a80102004228090201020042010103200148ff030aa55a005a00ff0200420101420002420104020042a7064200010201420004420104420001020102004201024200030201000330004200030201400902004201024235040201032001400423508d01228d0142350a48ff022a2502b4000000ff48ff01033035420105023542000542010403203548ff0a0aa536000000ff08ff0201000201420001400e420102420003420103423b0142000442010142000742010342280702014200030201020003100108ff031001420102420003420104020002a746a7ab0402a742010442000242010442000442010142000203400000020142000602b96402000040074201024235060201032001400423508d01628d01020235628d010142350102014235010320352a250200000000ff08ff2a25026c000000ff2a250200000000ff03303542010642350142000542010448ff0a0aa536001200ff48ff020200228d010200400e0201420004420104423b01020042010142000c420102422806420101420001020102a70042010542000642010202000601ab44ab0406a7ab02a7420104020042010502004201014200014201024200010002000201420007031000481e05033000420102423507020100431035014002021c48004800021c5a00480023508d01023523408d01004201010235628d0102023508ff423501420101023542010202350201023542010142000442010403203508ff0a1c48002400ff0a1c5a002400ff48ff0103103548ff07228d0108ff0200031000400d0201420005420103423b01020142000e020102070200420101422804020142000302a700227501000000000350014201034200064201014601ab0144ab0506a7ab0601ab4200024201014200014201074200014201010340014001033000420006020142000203200008ff0a1c24002400ff0a1c36002400ff08ff033001020042010202000235020142350242010603100100021c48005a00021c5a005a0000023500033001420102400123508d01228d014235014201040235420106420005020102004201010320350a1c48003600ff0a1c5a003600ff08ff03303b023b03203548ff080350000200400d02014200014201014200014201020200423b01020142000302a742000a420701420101420003020142000242a70240024201024200080600ab074001ab44ab07075000ab0600ab42010142000142010a02000201400103100142000642010342000102010320350a1c24003600ff0a1c36003600ff033001420104020042010d02354201010235420104400223508d01228d01023542010d42000c4235020aa55a005a00ff03103548ff052a25027e000000ff08ff02000235032035400c03500042000202014200010201420001423b0242000242a7014200060201420001420702420001420103420004020102a70310a7021c24006c00021c36006c004201034200060600ab074000ab44ab090601ab42010c62750100000000010002a536000000004201024200034201014200020201020042011242350242010302354201060340014003227501000000000235420101020042010602354201034200094201010235423b0142010103203548ff042a25027e000000ff0330354235010201400e420002420101420001420101423b02020042a702420005020142000242070202004201014228010201420005420101021c24007e00021c36007e004201024200060600ab074000ab44ab0b0601ab42010803400148e3040aa536001200e348e30203500102014200034201014200014201144200064201010235420103034001400402a536002400420114023b420102023502010235423b0342010148ff0442350302000201031000400c0201420003420103423b02020042a7020201420004420101400103500042010102000201422802020102280201420002420104020002014200070600ab44ab0c0601ab42010703400148ff0a02014200034201154200050201420002423501420104400502a53600360042010302004201090235420103423b02420105023b423501023b020142000103100008ff03303b423501420005400c035001420001420101420002423b020200020102a7020142000102014200024201014002227501000000000201422806420101020042010342000b0600ab072000ab44ab0c0601ab42000342010248ff0b03500142010a0200420101420001420106423b0142000302014200040201023542010540054201014235020200020102a742010c423b034201054235024201014200010201423b010235420006031000400b420001420102420002023b02004201064200020201020048bf0742280442010542000602014200040600ab44ab0a06a536005a00ab0601ab42000342010248ff0d4201094200020201420001420105423b03020142000142010202004201030235420104400502354201020235020042a70242010a423b0442010302350201423501423b010200420102023b42350142000342010142000102010310010002a55a005a0040074200020201420002423b01420002420103420004022848ff0803502842280342010342000542010202004201014200010600ab072000ab44ab090601ab42000342010248ff0e035001420107420006420107423b01020142000142010d4004228d01023542010342a703420109423b05420102423504423b01420103023b0235023b42000342010748da010aa55a002400da4004020042010142000202010200023b0200420102420007022848ff0a0350284228024200084201064200014600ab0144ab090600ab420003020103400148ff0f035001420107420006420107423b010201020042010c02a55a000000400422750100000000420104023542a702420002420106423b034201010200420101423503420001423b01420102423b010235023b42010102004201054228020320010aa55a003600ff400402000201420001420103023b420104420004020142280103202848ff0a4228024200074201074200030600ab072000ab44ab0406b82c001200ab0730b5ab0600ab42000448ff120200420107420005420108423b01020042010b0002a55a0012004004033000420003420105420001423501420103423b03420101420001420102423501420101423502420103423b024201014200014201034228034201014004420001420105023b420103420005020142280248ff0b422801420008420105423b024200020600ab072000ab06b82c000000ab44ab010710b5ab06b5ab063bab020142000348ff0b03300102010320010aa548005a00ff48ff03035001420107420003420104423b0142010202000201023b0200420109400802014200034201010235420103423503420101423b02420102020042010142350142010342350102010235420104423b0202014200020201422806020140040200420107023b420103420004020142280248ff0d42000c420101423b0242000142010146b5ab0106b82c001200ab0730b5ab06b5ab42010503400148ff090aa548005a00ff03300142010303200148ff03420107420003420104423b01420105023b420104034001400102a55a0000004008031001420102420003020142000202014235030201423b0242010702354201030235420103023b4201040200023b42000202014228074004420002420105023b420103420004020142280248ff0c4200040207420008423b03020042010302b546b5ab010200420102020042010148ff0a42010703100148ff01420104420005420104023b420108023b420101034001400302a55a00120040080200420103420006420101423501420101423b0142010202004201020200020102354201020235420104023b42010442000302074228084004020002a80200420105023b42010202000201420003020142280248ff0e42000302070200020142000202014200010201423b0242000242010142000242010142000142010303100148ff07033001420102020042010503200108ff420102420006420103023b420109023b020102a536000000400e03500042010342000402010235420105423b0102010200423502420102020042350142010c420002023b4207014228070200032001400342a802420105023b42000102010200420101420002020142280203202848ff0d0201420002420703420001420103423b01020142000742010142000342010203200148ff0642010242000142010a4200054201014001023b42010a023b020102a536001200400f0350004201034200034201020235420102423b01420104023542010242000142010d42000242280a02010200000310a842a805420105023b42000242010642280348ff0c02014200014201014207034201084200020201420002020142000442010348ff050200020142000242010a42000242010422750100000000400142010b03403b400c02692001360002693201360040030350000200020102354200034201030235420101023b42010942000142010e0200422801023b42280742010142000142a80602a74201040200023b4200014201010200020102004201040200020103100148ff080aa536005a00ff033001420003020103400740064201074200050201020042010603200108ff0330a8020108ff42000342010a42000342010540010350014201090340014008431035014002026920014800026932014800400402000235420004420106023b02004201090200020102b542010c422809420103020742a80702a74201020200420102420001020142000142010a0aa536005a00ff48ff050aa536005a00ff42010640070350010201420001420102020002014200030201020042010902a842010a0200420104420001420106023b02010310010002004201060200020140080330354235010320354001026920015a00026932015a004004420005420106023542010b020042010d422808420105020742a80642a7014200014201112275010000000042010248ff05420104400b020142000442010542000142010842a801420110420001420105023b42010242000202010200420102020002014008228d010235628d010300628d01014004420004420113020042010542b503420103422807420107420701020042010242a70342010d034001400122750100000000004201030200020103100148ff01031001420104400c020142000242010742000242010742a802020102004201020200420109420002420103023b420102000201420003420103023b02004008228d01400a0330004200010201020042011242000242010402b50340b502b82c00360002b82c00480002b542010242280742010842070142000142010202a7420109023b42010302a740010310a742010202a7020142000242010702a536004800400c4201030200420105420003420101020042010242000142a8014200040201020042010a420001420106400102a53600000003500102014200014201010200023b0340014015420103420001420108023542010742000102b5020142b50402b82c00120002b82c00240002b82c00000002b542010142280108ff42280242010c420003420106020042010842a70442010242a7020201420001420106400d42010b42000242010142000242010642000342010102004201094200014201024200014201010002a53600120040010200420102023b034001401642010502004201090235420104020003400002b82c00c60042b50123408d0102b82c00360002b82c005a0002b82c00240042b504020102b502280003302842280142010d420003420106020042010b02a742010442a7014201076275010000000001400d03500142011a42000242010c420001420102420002020103200140020200420101023b034001400d033001020140060330350201023502010042010102000201023542010702354201040200482b010ab82c0048002b0ab82c005a002b082b0ab82c0000002b0330b542b5010ab82c001200ff02b5020142b501034028400142010e004201014200024201090200420117034001401042011242000142010542000242010c4200014201024200014201020320004002420102400c033001420102400202a536002400400103303542010202354002035001420101023542010a42000248ff020ab82c001200ff0310b542b501020142b50302280ab82c0048008048800242010d03400100420126034001401142010442000142011342000242010c0200420107420001000330000200420103032001400a420101034001400302a5360036000330350235020102354201010235228d01400242010c420002020103203508ff0ab82c00a200ff42b50142010502b50ab82c006c00ff48ff0242010e4001420126401242010342000242011342000242010c02004201064200020201420001420104400a420101400102a54800240040014201070002a536005a00400142010902350201420003020142000202b542010602b50ab82c009000ff48ff02420104420001420108020742010302a7420104024342011102a74201064200010320004011035001420101420003420102020742010f42000242010d0200420104420002420108400702a548005a00033035420101400202a54800360003300142010a0320010002a54800000003500142010942000742010702b50ab82c007e00ff48ff034201050200420107020742010242a70242011542a702420104420003032000400a033000420001031001400302a5480000004001020000020142070342010e42000242011242000342010403400142a536004800014008420103400103100142010d03200102a54800120000420108420002420101420002420104020042010202b50ab82c006c00ff48ff030aa548004800ff0350014201034200014201060207420101020042a70242011642a70342010242000342010103100102a536005a00400502b9ac02120002b9be021200420004400202a5480012004003020142070342010e42000342010b0200420103420003420103034001401142010102000042010a02000201400142010742000242010a020042010202b50ab82c006c00ff48ff06020102a8020102a842000242010642000142a70142011842a703020142000242010502a548002400021c24000000021c360000004001033000420001420101420001400802a5360000000042070242010f420002420110420002420104401702a5480048000003500142011142000242010942000242010202b50ab82c009000ff48ff070350a802a8020142000442010342000342011a42a70242000242010602a548003600021c24001200021c36001200031000420003420102400902a536001200004201134200014201110200420104034001401b02a55a00480003503b42010d42000342010842000142010402b50ab82c006c00ff48ff0802a842010342000142010342000342011a42a7024200024201084200060201034001400d420101020042011502b5420111402142010b42000242010842000142b5050320b548ff070ab82c00b400ff42b50142010e42a70142010c02004201094200034201074200030201420002034000400f4201080601d704d7075001d742011f03100140224201094200044201054200020340b502b82c00480002b82c00120002b82c00240002b82c0036000350b502b50320b548ff070ab82c003600ff0350b502b542010704d60601d642010242a70342010c0200420107420002420109420001420103420001401002a55a0048004201070601d744d70206a55a000000d704d70601d742011c402202a54800000003500142010842000342010442000202b502b82c007e0003300042b5010320b502b82c00240042b5010320b548ff070ab82c00c600ff02b542010704d60601d642010342a701420105023b420107420001420104420002420109420002420103420001401102a5360000004201060601d744d70206a55a001200d744d7010601d742011c402102a54800120000035001420107420005020102a742000203400002b82c003600420002020142b502020102b50ab82c007e00ff48ff070350b542b501420105073001d60601d642010a423b01420108420001420103420001420109420005420101420001400502a55a002400400a02a536001200004201050601d744d7060601d742011602b5420102034001402442010602a70201420004020142a70102000340000003300042000242010142b5030ab82c007e00ff48ff080ab82c004800ff02b5420104023b4601d6014201020200420106023b42010942000142010142000242010942000142010402000201420001400502a55a003600400c4201050601d744d70606a55a000000d704d7063bd7420117034001402602a548004800400102a55a00000000020102a742010242000242a70340010201420003020102b502b82c00120042b5010320b50ab82c001200ff48ff070ab82c00c600ff02b5420103023b02010601d6420101420003420104423b0142010d42000142010a020042010102074201030200020102004003031001420101031001400b02a54800480042010406a9d744d70606a55a001200d704d7063bd742010742000142010d400f031001401902a55a00120040010350a742010242000142a70442010242000442b50142070202b50ab82c009000ff48ff060ab82c00c600ff42b5020201023b420103420005420103423b0142010c420001420109420001420101420701420106400102a536005a0003303b023b420103400b42010406a9d70720a9d744d707063bd7023b42010442000342010c400f033028420101401c42010342000142a70442010142000402014207040320b548ff070ab82c005a00ff0ab82c004800ff02b5420104420006420103023b42010c42000142010a0200420109020002014001420107400903300142010302000600d706a9d744d707063bd7423b01420102420005420109000201400d0330284228014201020320014001021c24000000021c36000000401602a54800480003500142010342a70342010242000442070502b50ab82c002400ff48ff070ab82c00c600ff02b5420103420007420102423b0142010b02004201180002a548005a0042010903100102a548005a00400502a536005a004201034200020600d70720a9d744d701061c48002400d7061c5a002400d744d701071001d7063bd7423b0142010242000542010a02a536004800400c0310284228024201030200032000021c24001200021c36001200401a03500142010142a70242010342000242070702b50ab82c006c00ff48ff060330b502b54201054200020201020002010200420101023b42010b02004201144200024201010042010c03100140044201024200044601d702071001d7061c48003600d7061c5a003600d704d706a55a005a00d70601d7063bd7423b0142010202000201420003420109400e422802420107023b03203b401a420109420002420705020102b50320b50ab82c002400ff48ff040330b502b542010c0200420101023b42010a0200420106023b42010c4200044201030042010b031001400102a94201014200034201024601d707423b0342010102000201420004420108400c422804420108423b0103103b4019420109020042070642010142b5010ab82c007e00ff0aa548002400ff08ff0aa55a005a00ff0ab82c002400ff02b542010f023b42010a0200420106423b0142010b42000542010202a5360000000042010c42a9024201014200014201064601d7030600d70601d7423b0342010102000201420004420108032001400c42280242010e031000401603500142010742070742010242b5010ab82c006c00ff0aa548003600ff0ab82c001200ff42b50242010f023b0200420108420001420110020042010242000542010202a5360012000042010b42a90242010142000242010942000100035001423b030200420102420003420109481c084310280140010228420001420110031001401542010742070642010302b54ab82c002400ff0142b502420108023b420107023b020042010e023b42010a42000202014200020201027b42011142a9030201420003420102420001420102420002020102b236002400400542011103100148ff030aa548002400ff08ff033001020102284001020142000142011103203b401442010742070542010442b503420109423b01420108023b4201194200030201420002427b02420101023b42010742000142010242a9044200080201420003020142000102014006020042011003200148ff020aa548003600ff03300002004201014001420114423b0140144201064207054201120100f0008d0dec010000000000").unwrap();
	let mut r = Reader::new(f.as_slice());
	let x_start = r.read_i32() as usize;
	let y_start = r.read_i32() as usize;
	let width = r.read_i16() as usize;
	let height = r.read_i16() as usize;

	let mut repeat = 0;

	for x in x_start..(x_start + width) {
		for y in y_start..(y_start + height) {
			if repeat > 0 {
				repeat -= 1;
				continue;
			}

			// Header bytes
			let h_1 = r.read_byte();
			let h_2 = if h_1 & 1 == 1 { r.read_byte() } else { 0 };
			let h_3 = if h_2 & 1 == 1 { r.read_byte() } else { 0 };
			let h_4 = if h_3 & 1 == 1 { r.read_byte() } else { 0 };

			let (active, id, frame_x, frame_y, color) = if h_1 & 2 == 2 {
				let id = if h_1 & 32 == 32 {
					r.read_i16()
				} else {
					r.read_byte() as i16
				};

				let (x, y) = if world.format.importance[id as usize] {
					let x = r.read_i16();
					let y = r.read_i16();
					(x, if id == 144 { 0 } else { y })
				} else { (-1, -1) };

				let col = if h_3 & 8 == 8 { r.read_byte() } else { 0 };

				(true, id, x, y, col)
			} else {
				(false, -1, 0, 0, 0)
			};

			let (wall, wall_color) = if h_1 & 4 == 4 {
				(r.read_byte() as u16, if h_3 & 16 == 16 { r.read_byte() as u16 } else { 0 })
			} else { (0, 0) };

			let liquid_bits = (h_1 & 0b11000) >> 3;
			let (liquid, liquid_header) = if liquid_bits != 0 {
				(if h_3 & 128 == 128 {
					Liquid::Shimmer // shimmer
				} else {
					match liquid_bits {
						2 => Liquid::Lava, // lava
						3 => Liquid::Honey, // honey
						_ => Liquid::Water, // water
					}
				}, r.read_byte())
			} else {
				(Liquid::None, 0)
			};

			let (wire_1, wire_2, wire_3, half_brick, slope) = if h_2 > 1 {
				let n_9 = (h_2 & 0b1110000) >> 4;
				// todo: add check for Main.tileSolid[(int) tile.type] || TileID.Sets.NonSolidSaveSlopes[(int) tile.type])
				let (hb, sl) = if n_9 != 0 {
					(n_9 == 1, n_9 - 1)
				} else { (false, 0) };
				(h_2 & 2 == 2, h_2 & 4 == 4, h_2 & 8 == 8, hb, sl)
			} else { (false, false, false, false, 0) };

			let (actuator, in_active, wire_4, wall) = if h_3 > 1 {
				let wall_extended = if h_3 & 64 == 64 {
					let new_wall = (r.read_byte() as u16) << 8 | wall;
					if new_wall < WALL_COUNT {
						new_wall
					} else {
						0
					}
				} else { wall };
				(h_3 & 2 == 2, h_3 & 4 == 4, h_3 & 32 == 32, wall_extended)
			} else { (false, false, false, wall) };

			let (invisible_block, invisible_wall, fullbright_block, fullbright_wall) = if h_4 > 1 {
				(h_4 & 2 == 2, h_4 & 4 == 4, h_4 & 8 == 8, h_4 & 16 == 16)
			} else { (false, false, false, false) };

			repeat = match (h_1 & 0b11000000) >> 6 {
				0 => 0,
				1 => r.read_byte() as i32,
				_ => r.read_i16() as i32,
			};

			println!("tile id {} repeats {}", id, repeat)
		}
	}

	for _ in 0..r.read_i16() {
		println!("sign, id = {}, x = {}, y = {}, text = {:?}", r.read_i16(), r.read_i16(), r.read_i16(), r.read_string());
	}

	// let world = World::from_file(Path::new("/Users/angelolloti/Library/Application Support/Terraria/Worlds/Courtyard_of_Grasshoppers.wld")).unwrap();

	// let Some(user_dirs) = UserDirs::new() else {
	// 	panic!("couldn't find user dir")
	// };

	// let Some(doc_dir) = user_dirs.document_dir() else {
	// 	panic!("couldn't find document dir")
	// };

	// let world_dir = doc_dir.join("My Games").join("Terraria").join("Worlds");
	// let world_files = fs::read_dir(world_dir).unwrap();
}
